window.formatGoogleCalendar=function(){"use strict";var n,t=function(n,t){var e=[];e=n.items.filter(function(n){return n&&n.hasOwnProperty("status")&&"cancelled"!==n.status}).sort(d).reverse();var a,s=0,r=0,c=[],u=[],p=[],l=document.querySelector(t.upcomingSelector),m=document.querySelector(t.pastSelector);-1===t.pastTopN&&(t.pastTopN=e.length),-1===t.upcomingTopN&&(t.upcomingTopN=e.length),!1===t.past&&(t.pastTopN=0),!1===t.upcoming&&(t.upcomingTopN=0);for(a in e)i(e[a].end.dateTime||e[a].end.date)?s<t.pastTopN&&(c.push(e[a]),s++):p.push(e[a]);p.reverse();for(a in p)r<t.upcomingTopN&&(u.push(p[a]),r++);for(a in c)m.insertAdjacentHTML("beforeend",o(c[a],t.itemsTagName,t.format));for(a in u)l.insertAdjacentHTML("beforeend",o(u[a],t.itemsTagName,t.format))},e=function(e){n=e;var a=e.calendarUrl;e.recurringEvents&&(a=a.concat("&singleEvents=true&orderBy=starttime")),e.timeMin&&(a=a.concat("&timeMin="+e.timeMin)),e.timeMax&&(a=a.concat("&timeMax="+e.timeMax));var s=new XMLHttpRequest;s.open("GET",a,!0),s.onload=function(){if(s.status>=200&&s.status<400){var n=JSON.parse(s.responseText);t(n,e)}else console.error(err)},s.onerror=function(){console.error(err)},s.send()},a=function(n,t){var e,a={};for(e in n)a[e]=n[e];for(e in t)a[e]=t[e];return a},s=function(n,t){for(var e=g(t),a=!0,s=0;s<3;s++)n[s]!==e[s]&&(a=!1);return a},r=function(n,t){for(var e=!0,a=0;a<3;a++)n[a]!==t[a]&&(e=!1);return e},o=function(t,e,a){var o=c(t.start.dateTime||t.start.date),i=c(t.end.dateTime||t.end.date),u=n.dayNames,p=!0,l=s(o,i);r(o,i)&&(p=!1),p&&(o=T(o)),l&&(i=v(i));var m,f=o.toString().replace(",",""),d=f.replace(",",""),g=d.split(",")[0],y=i.toString().replace(",",""),h=y.replace(",",""),D=h.split(",")[0],z=M(o,i,u,p,l),N="<"+e+">",N="<"+e+' class="CalListItem"data-productid='+g+D+">",S=t.summary||"",w=t.description||"",A=t.location||"";for(m=0;m<a.length;m++)a[m]=a[m].toString(),"*summary*"===a[m]?N=N.concat('<span class="summary">'+S+"</span> </div>"):"*date*"===a[m]?N=N.concat('<span class="date">'+z+"</span>"):"*time*"===a[m]?N=N.concat('<div class="wraptimeSummary"> <span class="time">'+z+"</span>"):"*description*"===a[m]?N=N.concat('<span class="description">'+w+"</span>"):"*location*"===a[m]?N=N.concat('<span class="location">'+A+"</span>"):("*location*"===a[m+1]&&""!==A||"*summary*"===a[m+1]&&""!==S||"*date*"===a[m+1]&&""!==z||"*description*"===a[m+1]&&""!==w)&&(N=N.concat(a[m]));return N+"</"+e+">"},i=function(n){var t=new Date(n);return(new Date).getTime()>t.getTime()},c=function(n){return n=new Date(n),[n.getDate(),n.getMonth(),n.getFullYear(),n.getHours(),n.getMinutes(),0,0]},u=function(n){return["Jan","Feb ","Mar ","Arp ","May ","June ","July ","Aug ","Sept ","Oct ","Nov ","Dec "][n]},p=function(n){return["<span class=ThezDayz>Sun</span>","<span class=ThezDayz>Mon</span>","<span class=ThezDayz>Tues</span>","<span class=ThezDayz>Wed</span>","<span class=ThezDayz>Thur</span>","<span class=ThezDayz>Fri</span>","<span class=ThezDayz>Sat</span>"][n]},l=function(n,t){var e=f(n);return e.setTime(e.getTime()+t),c(e)},m=function(n){return p(f(n).getDay())+" "},f=function(n){return new Date(n[2],n[1],n[0],n[3],n[4]+0,0)},d=function(n,t){return new Date(n.start.dateTime||n.start.date).getTime()-new Date(t.start.dateTime||t.start.date).getTime()},T=function(n){return l(n,864e5)},g=function(n){return l(n,-864e5)},v=function(n){return l(n,-6e4)},y=function(t,e,a,s,r){var o="",i="";return a&&(i=m(t)),o=!n.sameDayTimes||s||r?' <span class="theTime">  All Day</span>':' <span class="theTime"> '+N(t)+" - "+N(e)+"</span>","<span class=CalMonths>"+u(t[1])+" "+t[0]+" , "+t[2]+o+"</span><span class=ThisDayz>"+i+"</span>"},h=function(n,t,e){var a="",s="";return e&&(a=m(n),s=m(t)),"<span class=CalMonths>"+u(n[1])+n[0]+" / "+t[0]+" , "+n[2]+"</span><span class=ThisDayz>"+a+" - "+s+"</span>"},D=function(n,t,e){var a="",s="";return e&&(a=m(n),s=m(t)),a+u(n[1])+" "+n[0]+" - "+s+u(t[1])+" "+t[0]+" , "+n[2]},z=function(n,t,e){var a="",s="";return e&&(a=m(n),s=m(t)),"<span class=CalMonths>"+u(n[1])+" "+n[0]+" , "+n[2]+" - "+u(t[1])+" "+t[0]+" , "+t[2]+"</span><span class=ThisDayz>"+a+" - "+s+"</span>"},M=function(n,t,e,a,s){return n[0]===t[0]?n[1]===t[1]?n[2]===t[2]?y(n,t,e,a,s):z(n,t,e):n[2]===t[2]?D(n,t,e):z(n,t,e):n[1]===t[1]?n[2]===t[2]?h(n,t,e):z(n,t,e):n[2]===t[2]?D(n,t,e):z(n,t,e)},N=function(n){var t="am",e=n[3],a=n[4];return e>=12&&(t="pm",e>=13&&(e-=12)),0===e&&(e=12),a=(a<10?"0":"")+a,e+":"+a+t};return{init:function(n){var t={past:!0};t=a(t,n),e(t)}}}();